<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="jaql.css">
<!-- /*
 * Copyright (C) IBM Corp. 2008.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy of
 * the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */ -->
<html>
<head>
<title> Running Jaql </title>
</head>
<body>

<h1 align="center"> Running Jaql </h1>
<p/>

<h2>Introduction</h2>
<p/>
We've provided several tools to help you try out Jaql. 
Below, we show how to run the <a href="#shell">Jaql shell</a>, run the <a href="#examples">examples</a> from the documentatation,
and run unit <a href="#tests">tests</a>.

<a name="shell"></a><h2>Jaql Shell</h2>
<p/>
The Jaql shell is a very simple way to run Jaql queries.
Currently, it can run with a Hadoop MiniCluster or your own cluster.
Its pre-requisites are as follows:

<ul>
<li>Java 1.5 or greater
<li><a href="http://www.cygwin.com/">Cygwin</a> if using MS Windows
<li>If running your own, distributed cluster, <a href="http://archive.apache.org/dist/hadoop/core/hadoop-0.15.3/">Hadoop 0.15.3</a>, 
<a href="http://archive.apache.org/dist/hadoop/core/hadoop-0.16.4/">Hadoop 0.16.4</a>, and 
<a href="http://archive.apache.org/dist/hadoop/core/hadoop-0.17.1/">Hadoop 0.17.1</a>
</ul>

To get up and running, follow these steps:

<p/>
1. <a href="release/0.3/jaql-0.3.tgz">Download</a> the tar (for Hadoop 0.16.* clusters) <br>
For other versions of Hadoop, download: <a href="release/0.3/hadoop-0.15.3/jaql-0.3.tgz">Jaql + Hadoop 0.15.3</a> or 
<a href="release/0.3/hadoop-0.17.1/jaql-0.3.tgz">Jaql + Hadoop 0.17.1</a>

<p/>
2. <strong>untar</strong> jaql-0.3.tgz into DIR

<p/>
3. <strong>Setup the environment:</strong>
<br>
export JAQL_HOME=[DIR]/jaql-0.3

<i>Note: </i> If you already have a Hadoop cluster installed, when running jaql in local mode,
be sure to unset Hadoop related environment variables (e.g., HADOOP_HOME, HADOOP_CONF_DIR, ...).
<p/>

4. <strong>run it: </strong> from DIR/jaql-0.3, run <code>./bin/jaql JaqlShell</code>. You should see the <code>jaql></code> prompt 
if successful.

<p/>

By default, JaqlShell launches a Hadoop MiniCluster. A MiniCluster
runs HDFS, MapReduce, and HBase as multiple threads in a single process.
If you already have a distributed cluster installed and what to try out Jaql,
simply pass in the <code>-cluster</code> flag as follows: <code>./jaql JaqlShell -cluster</code>.
<p/>

<p/>
JaqlShell supports the following options:

<pre>
-cluster [use an existing cluster, do not launch a MiniCluster]
-jars    [list of comma separated jars to include user defined expressions or data stores]
-dir     [MiniCluster option: the root HDFS directory]
-fmt     [MiniCluster option: format HDFS?]
-n       [MiniCluster options: how many nodes to use]
</pre>

<a name="examples"></a><h2>Examples</h2>
<p/>
All examples from the documentation can be found in DIR/jaql/docs/examples.txt.
JaqlShell can be used to evaluate the examples either interactively or as a script.
To run interactively, fire up the <a href="shell">shell</a>, then cut-and-paste. 
To run as a script, pipe in the example file to the shell, i.e.,
<code>./jaql JaqlShell < docs/examples.txt</code>.
<p/>
<i>Note:</i>Queries from the documentation that intentionally produce exceptions were excluded from examples.txt.

<p/>
When extending Jaql, be sure to specify the jar file that includes your extensions to the shell.
For example, if your extension code is in <code>myextensions.jar</code>, specify the jar file
to the shell as follows: <code>./jaql JaqlShell -jars myextensions.jar</code>.

<a name="tests"></a><h2>Unit Tests</h2>
<p/>
The "tests" directory includes other tests that can be used as additional examples.
The tests are included under DIR/jaql/tests. Each test includes a <i>Queries</i>
file (i.e., DIR/jaql/tests/coreQueries.txt) and a <i>Gold</i> file (i.e., DIR/jaql/tests/coreGold.txt)
that lists expected outputs, including when failures are expected.
To run all of the tests, from DIR/jaql, run <code>ant test</code>.
The test outputs and logs will be placed in DIR/jaql/build/test/cache and DIR/jaql/build/test, respectively.
To run only one of the tests, from DIR/jaql, run <code>ant test -Dtest.include="TestCore"</code> for example.
The tests can also be run on a distributed cluster as follows: <code>ant test-cluster</code>.

<p/>
<p/>
<center> 
<a href="jaql-overview.html">Overview</a> | 
<a href="jaql-java-functions.html">Java Functions</a> | 
<a href="datasrc-extensibility.html">Extending Data-sources</a> | 
<a href="running.html">Running Jaql</a> | 
<a href="roadmap.html">Roadmap</a> 
</center>

</body>
</html>